var A=Object.defineProperty,I=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var D=(n,e,r)=>e in n?A(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,b=(n,e)=>{for(var r in e||(e={}))$.call(e,r)&&D(n,r,e[r]);if(_)for(var r of _(e))L.call(e,r)&&D(n,r,e[r]);return n},N=(n,e)=>I(n,P(e));import{r as p,j as m,a as o,b as k,P as R,A as O,c as w,M,C as y,D as j,R as F,d as B}from"./vendor.785fc72e.js";const K=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function l(t){if(t.ep)return;t.ep=!0;const s=r(t);fetch(t.href,s)}};K();const q=({todo:n,setTodo:e,handleAdd:r})=>{const l=p.exports.useRef(null);return m("form",{className:"input",onSubmit:t=>{var s;r(t),(s=l.current)==null||s.blur()},children:[o("input",{ref:l,value:n,onChange:t=>e(t.target.value),type:"input",placeholder:"Enter a task",className:"input_box"}),o("button",{className:"input_button",type:"submit",children:"Add"})]})},C=p.exports.createContext(void 0),H=({children:n})=>{const[e,r]=p.exports.useState([]),[l,t]=p.exports.useState([]),s=async()=>{await k.get("https://task-node-dk62.onrender.com/api/v1/tasks").then(a=>{var c=a.data.tasks;if(a.data.tasks.length>1){var T=[];c=c.filter(u=>u.completed==!0?(T.push(u),!1):!0),r(c),t(T)}})};return p.exports.useEffect(()=>{s()},[]),o(C.Provider,{value:{todos:e,completedTodos:l,setTodos:r,setCompletedTodos:t,fetchTodos:s},children:n})},S=()=>{const n=p.exports.useContext(C);if(n===void 0)throw new Error("useTodos must be used within a TodoProvider");return n},E=({index:n,todo:e,todos:r,setTodos:l,completed:t})=>{const[s,a]=p.exports.useState(!1),[c,T]=p.exports.useState(e.todo),{fetchTodos:u}=S(),i=(d,h)=>{d.preventDefault(),k.patch(`https://task-node-dk62.onrender.com/api/v1/tasks/${h}`,{todo:c,completed:e.completed}).then(v=>{u()}).catch(v=>{console.log(v)}),a(!1)},f=p.exports.useRef(null);p.exports.useEffect(()=>{var d;(d=f.current)==null||d.focus()},[s]);const g=d=>{k.delete(`https://task-node-dk62.onrender.com/api/v1/tasks/${d}`).then(h=>{u()}).catch(h=>{console.log(h)})},x=d=>{k.patch(`https://task-node-dk62.onrender.com/api/v1/tasks/${d}`,{todo:e.todo,completed:!e.completed}).then(h=>{u()}).catch(h=>{console.log(h)})};return o(R,{draggableId:e._id.toString(),index:n,children:(d,h)=>m("form",N(b(b({className:`todos_single ${h.isDragging?"singledrag":""} ${t?"completed_task":""}`,onSubmit:v=>i(v,e._id)},d.draggableProps),d.dragHandleProps),{ref:d.innerRef,onDoubleClick:()=>!t&&a(!s),onBlur:()=>a(!1),children:[s?o("input",{ref:f,value:c,className:"todos_single--text",onChange:v=>T(v.target.value)}):e.completed?o("s",{className:"todos_single--text",children:e.todo}):o("span",{className:"todos_single--text",children:e.todo}),m("div",{className:"icon",children:[o("span",{className:"icon_edit",onClick:()=>{!s&&!e.completed&&a(!s)},children:o(O,{})}),o("span",{className:"icon_delete",onClick:()=>g(e._id),children:o(w,{})}),o("span",{className:"icon_done",onClick:()=>x(e._id),children:o(M,{})})]})]}))})},z=({todos:n,setTodos:e,completedTodos:r,setCompletedTodos:l})=>m("div",{className:"container",children:[o(y,{droppableId:"TodoList",children:(t,s)=>m("div",N(b({className:`todos ${s.isDraggingOver?"dragactive":""}`,ref:t.innerRef},t.droppableProps),{children:[o("span",{className:"todos_heading",children:"Active Tasks"}),n.map((a,c)=>o(E,{index:c,todo:a,todos:n,setTodos:e,completed:!1},a._id)),t.placeholder]}))}),o(y,{droppableId:"TodoList1",children:(t,s)=>m("div",N(b({className:`todos_remove ${s.isDraggingOver?"dragcomplete":""}`,ref:t.innerRef},t.droppableProps),{children:[o("span",{className:"todos_heading",children:"Completed Tasks"}),r.map((a,c)=>o(E,{index:c,todo:a,todos:r,setTodos:l,completed:!0},a._id)),t.placeholder]}))})]}),G=()=>{const[n,e]=p.exports.useState(""),{todos:r,completedTodos:l,setTodos:t,setCompletedTodos:s,fetchTodos:a}=S();return o(j,{onDragEnd:u=>{const{destination:i,source:f}=u;if(!i||i.droppableId===f.droppableId&&i.index===f.index)return;let g,x=r,d=l;f.droppableId==="TodoList"?(g=x[f.index],x.splice(f.index,1)):(g=d[f.index],d.splice(f.index,1)),i.droppableId==="TodoList"?x.splice(i.index,0,g):d.splice(i.index,0,g),s(d),t(x)},children:m("div",{className:"app",children:[o("span",{className:"heading",children:o("i",{children:"TASKS"})}),o(q,{todo:n,setTodo:e,handleAdd:async u=>{u.preventDefault(),await k.post("https://task-node-dk62.onrender.com/api/v1/tasks",{todo:n,completed:!1}).then(i=>{a()}).catch(i=>{console.log(i)}),e("")}}),o(z,{todos:r,setTodos:t,completedTodos:l,setCompletedTodos:s})]})})};F.render(o(B.StrictMode,{children:o(H,{children:o(G,{})})}),document.getElementById("root"));
