var I=Object.defineProperty,$=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var S=(n,e,a)=>e in n?I(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,N=(n,e)=>{for(var a in e||(e={}))w.call(e,a)&&S(n,a,e[a]);if(C)for(var a of C(e))O.call(e,a)&&S(n,a,e[a]);return n},y=(n,e)=>$(n,R(e));import{r as i,j as f,a as o,b as _,P as M,A as j,c as F,M as B,C as E,D as K,R as q,d as H}from"./vendor.4a22ad7f.js";const W=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&c(l)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}};W();const z=({todo:n,setTodo:e,handleAdd:a})=>{const c=i.exports.useRef(null);return f("form",{className:"input",onSubmit:t=>{var s;a(t),(s=c.current)==null||s.blur()},children:[o("input",{ref:c,value:n,onChange:t=>e(t.target.value),type:"input",placeholder:"Enter a task",className:"input_box"}),o("button",{className:"input_button",type:"submit",children:"Add"})]})},L=i.exports.createContext(void 0),G=({children:n})=>{const[e,a]=i.exports.useState([]),[c,t]=i.exports.useState([]),[s,l]=i.exports.useState(!1),[p,T]=i.exports.useState(!0),m=s?"https://task-node-dk62.onrender.com/api/v1/personaltasks":"https://task-node-dk62.onrender.com/api/v1/tasks",x=async()=>{await _.get(m).then(h=>{var g=h.data.tasks;if(h.data.tasks.length>0){var b=[];g=g.filter(r=>r.completed==!0?(b.push(r),!1):!0),a(g),t(b),T(!1)}}).catch(h=>{console.log(h)})},v=async h=>{await _.patch(`${m}/${h._id}`,{todo:h.todo,completed:!h.completed}).then(g=>{x()}).catch(g=>{console.log(g)})};return i.exports.useEffect(()=>{x()},[m]),o(L.Provider,{value:{todos:e,completedTodos:c,setTodos:a,setCompletedTodos:t,fetchTodos:x,handleDone:v,toggle:s,setToggle:l,url:m,loading:p},children:n})},P=()=>{const n=i.exports.useContext(L);if(n===void 0)throw new Error("useTodos must be used within a TodoProvider");return n},A=({index:n,todo:e,todos:a,setTodos:c,completed:t})=>{const[s,l]=i.exports.useState(!1),[p,T]=i.exports.useState(e.todo),{fetchTodos:m,url:x,handleDone:v}=P(),h=(r,d)=>{r.preventDefault(),_.patch(`${x}/${d}`,{todo:p,completed:e.completed}).then(u=>{m()}).catch(u=>{console.log(u)}),l(!1)},g=i.exports.useRef(null);i.exports.useEffect(()=>{var r;(r=g.current)==null||r.focus()},[s]);const b=r=>{_.delete(`${x}/${r}`).then(d=>{m()}).catch(d=>{console.log(d)})};return o(M,{draggableId:e._id.toString(),index:n,children:(r,d)=>f("form",y(N(N({className:`todos_single ${d.isDragging?"singledrag":""} ${t?"completed_task":""}`,onSubmit:u=>h(u,e._id)},r.draggableProps),r.dragHandleProps),{ref:r.innerRef,onDoubleClick:()=>!t&&l(!s),onBlur:()=>l(!1),children:[s?o("input",{ref:g,value:p,className:"todos_single--text",onChange:u=>T(u.target.value)}):e.completed?o("s",{className:"todos_single--text",children:e.todo}):o("span",{className:"todos_single--text",children:e.todo}),f("div",{className:"icon",children:[o("span",{className:"icon_edit",onClick:()=>{!s&&!e.completed&&l(!s)},children:o(j,{})}),o("span",{className:"icon_delete",onClick:()=>b(e._id),children:o(F,{})}),o("span",{className:"icon_done",onClick:()=>v(e),children:o(B,{})})]})]}))})},J=({todos:n,setTodos:e,completedTodos:a,setCompletedTodos:c})=>f("div",{className:"container",children:[o(E,{droppableId:"TodoList",children:(t,s)=>f("div",y(N({className:`todos ${s.isDraggingOver?"dragactive":""}`,ref:t.innerRef},t.droppableProps),{children:[o("span",{className:"todos_heading",children:"Active Tasks"}),n.map((l,p)=>o(A,{index:p,todo:l,todos:n,setTodos:e,completed:!1},l._id)),t.placeholder]}))}),o(E,{droppableId:"TodoList1",children:(t,s)=>f("div",y(N({className:`todos_remove ${s.isDraggingOver?"dragcomplete":""}`,ref:t.innerRef},t.droppableProps),{children:[o("span",{className:"todos_heading",children:"Completed Tasks"}),a.map((l,p)=>o(A,{index:p,todo:l,todos:a,setTodos:c,completed:!0},l._id)),t.placeholder]}))})]}),Q=()=>{const[n,e]=i.exports.useState(""),{todos:a,completedTodos:c,setTodos:t,setCompletedTodos:s,fetchTodos:l,toggle:p,setToggle:T,url:m,loading:x,handleDone:v}=P();return o(K,{onDragEnd:b=>{const{destination:r,source:d}=b;if(!r||r.droppableId===d.droppableId&&r.index===d.index)return;let u,D=a,k=c;d.droppableId==="TodoList"?(u=D[d.index],D.splice(d.index,1)):(u=k[d.index],k.splice(d.index,1)),v(u),r.droppableId==="TodoList"?D.splice(r.index,0,u):k.splice(r.index,0,u),s(k),t(D)},children:x?o("h1",{className:"loading",children:"Loading..."}):f("div",{className:"app",children:[f("span",{className:"heading",children:[o("i",{children:"TASKS"}),f("section",{className:"head_side",children:[f("label",{className:"switch",children:[o("input",{type:"checkbox",checked:p,onChange:()=>T(!p)}),o("span",{className:"slider round"})]}),f("span",{className:"switch_label",children:[p?"Personal":"Work"," "]})]})]}),o(z,{todo:n,setTodo:e,handleAdd:async b=>{b.preventDefault(),await _.post(m,{todo:n,completed:!1}).then(r=>{l()}).catch(r=>{console.log(r)}),e("")}}),o(J,{todos:a,setTodos:t,completedTodos:c,setCompletedTodos:s})]})})};q.render(o(H.StrictMode,{children:o(G,{children:o(Q,{})})}),document.getElementById("root"));
