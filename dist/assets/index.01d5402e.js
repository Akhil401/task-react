var A=Object.defineProperty,I=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var C=(n,e,a)=>e in n?A(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,N=(n,e)=>{for(var a in e||(e={}))R.call(e,a)&&C(n,a,e[a]);if(y)for(var a of y(e))w.call(e,a)&&C(n,a,e[a]);return n},D=(n,e)=>I(n,$(e));import{r as p,j as f,a as o,b as _,P as O,A as M,c as j,M as F,C as S,D as B,R as K,d as q}from"./vendor.785fc72e.js";const H=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerpolicy&&(s.referrerPolicy=t.referrerpolicy),t.crossorigin==="use-credentials"?s.credentials="include":t.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}};H();const W=({todo:n,setTodo:e,handleAdd:a})=>{const i=p.exports.useRef(null);return f("form",{className:"input",onSubmit:t=>{var s;a(t),(s=i.current)==null||s.blur()},children:[o("input",{ref:i,value:n,onChange:t=>e(t.target.value),type:"input",placeholder:"Enter a task",className:"input_box"}),o("button",{className:"input_button",type:"submit",children:"Add"})]})},E=p.exports.createContext(void 0),z=({children:n})=>{const[e,a]=p.exports.useState([]),[i,t]=p.exports.useState([]),[s,l]=p.exports.useState(!1),[u,v]=p.exports.useState(!0),g=s?"https://task-node-dk62.onrender.com/api/v1/personaltasks":"https://task-node-dk62.onrender.com/api/v1/tasks",m=async()=>{await _.get(g).then(b=>{var T=b.data.tasks;if(b.data.tasks.length>0){var x=[];T=T.filter(d=>d.completed==!0?(x.push(d),!1):!0),a(T),t(x),v(!1)}}).catch(b=>{console.log(b)})};return p.exports.useEffect(()=>{m()},[g]),o(E.Provider,{value:{todos:e,completedTodos:i,setTodos:a,setCompletedTodos:t,fetchTodos:m,toggle:s,setToggle:l,url:g,loading:u},children:n})},L=()=>{const n=p.exports.useContext(E);if(n===void 0)throw new Error("useTodos must be used within a TodoProvider");return n},P=({index:n,todo:e,todos:a,setTodos:i,completed:t})=>{const[s,l]=p.exports.useState(!1),[u,v]=p.exports.useState(e.todo),{fetchTodos:g,url:m}=L(),b=(r,c)=>{r.preventDefault(),_.patch(`${m}/${c}`,{todo:u,completed:e.completed}).then(h=>{g()}).catch(h=>{console.log(h)}),l(!1)},T=p.exports.useRef(null);p.exports.useEffect(()=>{var r;(r=T.current)==null||r.focus()},[s]);const x=r=>{_.delete(`${m}/${r}`).then(c=>{g()}).catch(c=>{console.log(c)})},d=r=>{_.patch(`${m}/${r}`,{todo:e.todo,completed:!e.completed}).then(c=>{g()}).catch(c=>{console.log(c)})};return o(O,{draggableId:e._id.toString(),index:n,children:(r,c)=>f("form",D(N(N({className:`todos_single ${c.isDragging?"singledrag":""} ${t?"completed_task":""}`,onSubmit:h=>b(h,e._id)},r.draggableProps),r.dragHandleProps),{ref:r.innerRef,onDoubleClick:()=>!t&&l(!s),onBlur:()=>l(!1),children:[s?o("input",{ref:T,value:u,className:"todos_single--text",onChange:h=>v(h.target.value)}):e.completed?o("s",{className:"todos_single--text",children:e.todo}):o("span",{className:"todos_single--text",children:e.todo}),f("div",{className:"icon",children:[o("span",{className:"icon_edit",onClick:()=>{!s&&!e.completed&&l(!s)},children:o(M,{})}),o("span",{className:"icon_delete",onClick:()=>x(e._id),children:o(j,{})}),o("span",{className:"icon_done",onClick:()=>d(e._id),children:o(F,{})})]})]}))})},G=({todos:n,setTodos:e,completedTodos:a,setCompletedTodos:i})=>f("div",{className:"container",children:[o(S,{droppableId:"TodoList",children:(t,s)=>f("div",D(N({className:`todos ${s.isDraggingOver?"dragactive":""}`,ref:t.innerRef},t.droppableProps),{children:[o("span",{className:"todos_heading",children:"Active Tasks"}),n.map((l,u)=>o(P,{index:u,todo:l,todos:n,setTodos:e,completed:!1},l._id)),t.placeholder]}))}),o(S,{droppableId:"TodoList1",children:(t,s)=>f("div",D(N({className:`todos_remove ${s.isDraggingOver?"dragcomplete":""}`,ref:t.innerRef},t.droppableProps),{children:[o("span",{className:"todos_heading",children:"Completed Tasks"}),a.map((l,u)=>o(P,{index:u,todo:l,todos:a,setTodos:i,completed:!0},l._id)),t.placeholder]}))})]}),J=()=>{const[n,e]=p.exports.useState(""),{todos:a,completedTodos:i,setTodos:t,setCompletedTodos:s,fetchTodos:l,toggle:u,setToggle:v,url:g,loading:m}=L();return o(B,{onDragEnd:x=>{const{destination:d,source:r}=x;if(!d||d.droppableId===r.droppableId&&d.index===r.index)return;let c,h=a,k=i;r.droppableId==="TodoList"?(c=h[r.index],h.splice(r.index,1)):(c=k[r.index],k.splice(r.index,1)),d.droppableId==="TodoList"?h.splice(d.index,0,c):k.splice(d.index,0,c),s(k),t(h)},children:m?o("h1",{className:"loading",children:"Loading..."}):f("div",{className:"app",children:[f("span",{className:"heading",children:[o("i",{children:"TASKS"}),f("section",{className:"head_side",children:[f("label",{className:"switch",children:[o("input",{type:"checkbox",checked:u,onChange:()=>v(!u)}),o("span",{className:"slider round"})]}),f("span",{className:"switch_label",children:[u?"Personal":"Work"," "]})]})]}),o(W,{todo:n,setTodo:e,handleAdd:async x=>{x.preventDefault(),await _.post(g,{todo:n,completed:!1}).then(d=>{l()}).catch(d=>{console.log(d)}),e("")}}),o(G,{todos:a,setTodos:t,completedTodos:i,setCompletedTodos:s})]})})};K.render(o(q.StrictMode,{children:o(z,{children:o(J,{})})}),document.getElementById("root"));
